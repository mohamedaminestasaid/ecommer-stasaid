{"version":3,"file":"static/js/4420.2f806517.chunk.js","mappings":"kNAKMA,EAAkB,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOC,EAAQC,GAAQ,IAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,GACzBC,EAAAA,EAAAA,GAAM,CAC3BC,IAAK,qDACLC,OAAQ,OACRC,KAAM,CACJC,IAAKX,EACLC,SAAUA,KAEX,KAAD,EAPY,OAARC,EAAQE,EAAAQ,KAAAR,EAAAS,OAAA,SAQPX,EAASQ,MAAI,wBAAAN,EAAAU,OAAA,GAAAf,EAAA,KACrB,gBAVuBgB,EAAAC,GAAA,OAAArB,EAAAsB,MAAA,KAAAC,UAAA,KAqExB,UAzDiB,WACf,IAAAC,GAAwCC,EAAAA,EAAAA,MAAiBC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlDI,EAAYF,EAAA,GAEbG,GAF8BH,EAAA,GAEb,eAAAI,GAAA7B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA4B,EAAO1B,EAAQC,GAAQ,IAAA0B,EAAAC,EAAAC,EAAA,OAAAhC,EAAAA,EAAAA,KAAAM,MAAA,SAAA2B,GAAA,cAAAA,EAAAzB,KAAAyB,EAAAxB,MAAA,cAAAwB,EAAAzB,KAAA,EAAAyB,EAAAxB,KAAA,GAExByB,EAAAA,EAAAA,GACnB,+GACA,KAAD,EAFW,GAANJ,EAAMG,EAAAlB,KAGA,CAADkB,EAAAxB,KAAA,eAAAwB,EAAAjB,OAAA,wBAAAiB,EAAAxB,KAAA,EACWZ,EAAmBM,EAAQC,GAAU,KAAD,EAElC,OAFlB2B,EAAOE,EAAAlB,KAEboB,QAAQC,IAAIL,EAAQM,IAAIJ,EAAAxB,KAAA,GACHqB,EAAOQ,mBAAmB,CAC7CC,UAAWR,EAAQM,KAClB,KAAD,IAFIL,EAAMC,EAAAlB,MAGDyB,OACTL,QAAQC,IAAIJ,EAAOQ,OACpBP,EAAAxB,KAAA,iBAAAwB,EAAAzB,KAAA,GAAAyB,EAAAQ,GAAAR,EAAA,SAEDE,QAAQC,IAAGH,EAAAQ,IAAM,yBAAAR,EAAAhB,OAAA,GAAAY,EAAA,mBAEpB,gBAlBsBa,EAAAC,GAAA,OAAAf,EAAAR,MAAA,KAAAC,UAAA,MAqCvB,OAjBAuB,EAAAA,EAAAA,YAAU,WACR,IAAM9B,EAAMY,EAAamB,IAAI,OACvBC,EAAMpB,EAAamB,IAAI,OACvBzC,EAAWsB,EAAamB,IAAI,YAElC,GAAKzC,GAAaU,EAAlB,CACA,IAAMiC,EAAiBC,KAAKC,MAAM7C,GACtB,QAAR0C,GACFI,aAAaC,QAAQ,OAAQ,MAE/BxB,EAAkBb,EAAKiC,GACpBK,MAAK,WAAO,IACZC,OAAM,SAACC,GACNnB,QAAQC,IAAIkB,EACd,GAT2B,CAU/B,GAAG,KAGDC,EAAAA,EAAAA,MAAA,OACEC,MAAO,CACLC,OAAQ,QACRC,MAAO,QACPC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,cAAe,UACfC,SAAA,EAEFC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,oBACJC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,kEAGT,C","sources":["pages/other/Checkout.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\nconst createStripeCharge = async (userId, articles) => {\r\n  const response = await axios({\r\n    url: \"http://localhost:7777/items/stripe-create-checkout\",\r\n    method: \"POST\",\r\n    data: {\r\n      tsx: userId,\r\n      articles: articles,\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n\r\nconst Checkout = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  const handleFetchCharge = async (userId, articles) => {\r\n    try {\r\n      const stripe = await loadStripe(\r\n        \"pk_test_51PXBmOCUSRTcdF7d1vbjX4o3MeZxXFyXOxTUWPLUgHactUW91dtINga7G7Vhi2AggdA4cO5xD1j6GDZp7Rm3NCqH00m2ItVBvC\"\r\n      );\r\n      if (!stripe) return;\r\n      const session = await createStripeCharge(userId, articles);\r\n\r\n      console.log(session.id);\r\n      const result = await stripe.redirectToCheckout({\r\n        sessionId: session.id,\r\n      });\r\n      if (result.error) {\r\n        console.log(result.error);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const tsx = searchParams.get(\"tsx\");\r\n    const ufa = searchParams.get(\"ufa\");\r\n    const articles = searchParams.get(\"articles\");\r\n\r\n    if (!articles || !tsx) return;\r\n    const parsedArticles = JSON.parse(articles);\r\n    if (ufa === \"606\") {\r\n      localStorage.setItem(\"limo\", \"ya\");\r\n    }\r\n    handleFetchCharge(tsx, parsedArticles)\r\n      .then(() => {})\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100vh\",\r\n        width: \"100vw\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <h1>Please Wait...</h1>\r\n      <p>Your request is being processed, Please give us a moment...</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"names":["createStripeCharge","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userId","articles","response","wrap","_context","prev","next","axios","url","method","data","tsx","sent","abrupt","stop","_x","_x2","apply","arguments","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","handleFetchCharge","_ref2","_callee2","stripe","session","result","_context2","loadStripe","console","log","id","redirectToCheckout","sessionId","error","t0","_x3","_x4","useEffect","get","ufa","parsedArticles","JSON","parse","localStorage","setItem","then","catch","err","_jsxs","style","height","width","display","justifyContent","alignItems","flexDirection","children","_jsx"],"sourceRoot":""}